<html>
    <head>
        <title>Note Rails</title>
        <script type="text/javascript" src="/eel.js"></script>
        <link rel="stylesheet" href="global.css">
        <style>
            
        </style>
        <script>
            var songs_table;
            
            var instrument_directory;

            function OnLoad () {
                songs_table = document.getElementById("songs_table");

                const urlParams = new URLSearchParams(window.location.search);
                instrument_directory = urlParams.get("instrument");

                Main();
            }

            function Main () {
                 LoadSongs();
            }

            function LoadSongs () {
                eel.get_songs(instrument_directory) (songs => {
                    var html = "";
                    console.log(songs)
                    songs.forEach(object => {
                        html += "<tr>";
                        html += "<td>" + object.title + "</td>";
                        if (object.image != "") {
                            html += "<td>" + '<img id="thumbnail" src="' + object.image + '">' + "</td>";
                        } else {
                            html += "<td>" + '<img id="thumbnail" src="images/default_song_icon.jpg">' + "</td>"; 
                        }
                        html += "<td>" + "<button onclick=\"SelectSong('" + object.directory + "')\">></button>" + "</td>";
                        html += "<td>" + "<button onclick=\"SelectBlockerSong('" + object.directory + "')\">></button>" + "</td>"; 
                        html += "</tr>";
                    });
                    songs_table.innerHTML = html;
                });
            }

            function Back () {
                window.location = "index.html";
            }

            function SelectSong (song_directory) {
                window.location = "song_flow.html?instrument=" + instrument_directory + "&song=" + song_directory;
            }

            function SelectBlockerSong (song_directory) {
                window.location = "song_block.html?instrument=" + instrument_directory + "&song=" + song_directory;
            }

            function Calibrate () {
                window.location = "calibration.html?instrument=" + instrument_directory
            }
        </script>

    </head>
    <body onload="OnLoad()">
        <button onclick="Back()">Back</button>
        <button onclick="Calibrate()">Calibrate</button>
        <table id="songs_table"></table>
    </body>
</html>